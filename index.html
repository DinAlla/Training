<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <script >
    class Rule {
    isRequired() {
        //console.log('вошли в isRequired');
        this.require = function(value){
            //console.log('вошли в require');
            if(!value)  return "Ничего не введено"; 
            else return "";
        }
        return this;
    }

    maxLength(n){
        //console.log('вошли в maxLength '+n);
        this.maxlength = function(value){
            //console.log('вошли в maxlength n='+n +''+value.length);
            if(value.length > n) return "Слишком большое значение";
            else return "";
        }
        return this;
    }

    minLength(n){
        this.minlength = function(value){
            if (value.length < n) return "Слишком маленькое значение";
            else return "";
        }
        return this;
    }
    validateRule(value) {
        //console.log('вошли в validateRule');
        var err=[];
        for(var key in this){
                err.push(this[key](value));
            }
        return err;
        
    }
}


class Validator {
    Validate(data, rules){
        //console.log('вошли в Validate');
        let err = [];
        for(var key in rules){
            console.log('цикл ' + key);
            err.push(rules[key].validateRule(data[key]));
            //console.log(err);
            }
        return new Promise(function(resolve, reject){
            var n=[], i=0;
            for (var key in err){
                    //console.log(err[key]+' err[key]');
                if (err[key] == ''){
                    i++; 
                    n.push(i); 
                    //console.log(n +'ahaha');}
                    i++;
                }
            }
            //console.log(n);
            if(n.length == 0) resolve();
            else reject(err);
        });
    }
}
let person = {
    name: "",
    age: 23,
    phoneNumber: '+3123131231'
}

let rules = {
    name: new Rule().isRequired().maxLength(1),
    age: new Rule().isRequired(),
    phoneNumber: new Rule().isRequired().minLength(566)
}

var promise = new Validator().Validate(person, rules)
.then(result => console.log('all good'))
.catch(result => console.log(result));
  </script>
</head>
<body>
</body>
</html>